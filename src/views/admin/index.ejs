
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN | Funkshop</title>
    <link rel="stylesheet" href="../../css/index.css">
    <link rel="stylesheet" href="../../css/admin.css">
</head>
<body>
  <%- include('../partials/header') %>    
      <main class="admin-container">
        <div class="admin container">
    
        <div class="agregar container">
          <section class="agregar__listado">
            <h2 class="agregar__listado__tittle">LISTADO DE PRODUCTOS</h2>
            <div class="agregar__boton">       
              <a class="agregar__boton__tittle" href="/admin/productos/create">NUEVO PRODUCTO</a>

            </div>
           
          </section>    
          
          


          <div style="overflow-x:auto;">
          <table class="agregar__tabla">

                <tr>
                  <th>Id</th>
                  <th>Código</th>
                  <th>Categoría</th>
                  <th>Nombre</th>
                  <th>Precio</th> 
                  <th>Imagen</th>
                  <th>Operaciones</th>
                </tr>
         
       
                
                <% productos.forEach(producto => { %>
                <tr>
                    <td><%= producto.id %></td>
                    <td><%= producto.codigo %></td>
                    <td><%= producto.categoria %></td>
                    <td><%= producto.nombre %></td>
                    <td>$ <%= producto.precio %></td>
                    <td class="imgtd"><img 
                        width="50"    height="50";
                        src="/uploads/productos/producto_<%= producto.id %>.jpg" 
                        alt="<%= producto.nombre %>"
                        />
                    </td>

            <td>
                        <a href="/admin/productos/<%= producto.id %>/edit"><img class="agregar__tabla__lapiz" src="../../img/icons/edit_pencil.svg" alt="editar-producto"></a>
                        <!-- <a href="/admin/productos/<%= producto.id %>/edit">Editar</a> -->
    <!-- </main>
    HACGO UN OVERRIDE (?_) DEL METODO POST CON EL METODO DELETE -->
    <!-- VA A LLEGAR A ESE METODO SIMPLEMENTE CON ESTE PARAMETRO (%= producto.id) -->
               <form 
               class="form-delete"
               style="display: inline-block"
               action="/admin/productos/<%= producto.id %>?_method=DELETE" 
               method="post"
               >
                <button type="submit"><img class="agregar__tabla__tacho" src="../../img/icons/delete_trash.svg" alt="borrar-producto"></button>
               </form>
            </td>
                    </tr>
                    <% }) %>
          
                    
        </table></div>

        </div>
        </div> 
      </main>
      <footer>
          <nav class="navbar container">
            <ul class="navbar__item">
              <li class="navbar__item">
                <a class="navbar__link" href="../../pages/shop/shop.html">SHOP</a>
              </li>
              <li class="navbar__item">
                <a class="navbar__link" href="../../pages/admin/register.html">REGISTRARSE</a>
              </li>
              <li class="navbar__item">
                <a class="navbar__link" href="../../pages/admin/login.html">INGRESAR</a>
              </li>
              <li class="navbar__item">
                <a class="navbar__link" href="../../index.html">CONTACTO</a>
              </li>
            </ul>
            <picture>
              <img src="../../img/branding/isotype.svg" alt="Isotipo de FunkoShop" />
            </picture>
          </nav>
        <p class="footer__copy">All rights reserved 2023 - Funkoshop &copy;</p>
      </footer>    
</body>
</html>